<h2>You have {{ cartProducts.length }} products in your cart</h2>
<button mat-flat-button (click)="clearCart()">Clear Cart</button>
<table mat-table #table [dataSource]="cartProducts" class="mat-elevation-z8">
  <!-- Item Column -->
  <ng-container matColumnDef="Product">
    <th class="product-header-cell" mat-header-cell *matHeaderCellDef>
      Product
    </th>
    <td mat-cell *matCellDef="let item">
      <div class="product-info">
        <img
          [src]="item.product.image"
          alt="{{ item.product.title }}"
          class="product-image"
        />
        <span>{{ item.product.title }}</span>
      </div>
    </td>
    <td class="product-header-cell" mat-footer-cell *matFooterCellDef>Total</td>
  </ng-container>

  <ng-container matColumnDef="Quantity">
    <th mat-header-cell *matHeaderCellDef>Quantity</th>
    <td mat-cell *matCellDef="let item; let i = index">
      <button
        mat-icon-button
        aria-label="Decrease quantity of product ${item.product.title}"
        (click)="decQuantity(i)"
      >
        <mat-icon>keyboard_arrow_left</mat-icon>
      </button>
      {{ item.quantity }}

      <button
        mat-icon-button
        aria-label="Increase quantity of product ${item.product.title}"
        (click)="incQuantity(i)"
      >
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </td>
    <td mat-footer-cell *matFooterCellDef></td
  ></ng-container>

  <!-- Cost Column -->
  <ng-container matColumnDef="Price">
    <th mat-header-cell *matHeaderCellDef>Price</th>
    <td mat-cell *matCellDef="let item">
      {{ item.product.price * item.quantity | currency }}
    </td>
    <td mat-footer-cell *matFooterCellDef>{{ getTotalCost() | currency }}</td>
  </ng-container>

  <ng-container matColumnDef="Delete">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let item; let i = index">
      <button
        mat-icon-button
        aria-label="Delete product ${item.product.title}"
        (click)="deleteProduct(i)"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </td>
    <td class="product-header-cell" mat-footer-cell *matFooterCellDef></td>
  </ng-container>

  <!-- Disclaimer column -->
  <ng-container matColumnDef="disclaimer">
    <td mat-footer-cell *matFooterCellDef colspan="4">
      Please note that the total cost excludes shipping costs.
    </td>
  </ng-container>

  <!-- The table will render two header rows, one data row per data object, and two footer rows. -->
  <tr
    mat-header-row
    *matHeaderRowDef="displayedColumns"
    class="example-first-header-row"
  ></tr>

  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

  <tr
    mat-footer-row
    *matFooterRowDef="displayedColumns"
    class="example-first-footer-row"
  ></tr>
  <tr
    mat-footer-row
    *matFooterRowDef="['disclaimer']"
    class="example-second-footer-row"
  ></tr>
</table>
<button mat-flat-button (click)="orderNow()">Order Now</button>
